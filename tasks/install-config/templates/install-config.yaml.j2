apiVersion: v1
baseDomain: {{ base_domain }}
compute:
- hyperthreading: Enabled
  architecture: amd64
  name: worker
  replicas: {{ (single_node | default(false) | bool) | ternary(0, (workers | default([]) + infras | default([])) | length) }}
controlPlane:
  hyperthreading: Enabled
  architecture: amd64
  name: master
  replicas: {{ (single_node | default(false) | bool) | ternary(1, 3) }}
metadata:
  name: {{ cluster_domain }}
networking:
  clusterNetwork:
  - cidr: {{ cluster_network_cidr | default('10.128.0.0/14') }}
    hostPrefix: {{ cluster_network_hostprefix | default(23) }}
  machineNetwork:
  - cidr: {{ machine_network_cidr | default('10.0.2.0/24') }}
  networkType: {{ network_type | default('OVNKubernetes') }}
  serviceNetwork:
  - {{ service_network_cidr | default('172.30.0.0/16') }}
fips: {{ fips | default(false) | bool }}
platform:
  none: {}
pullSecret: '{{ _pull_secret_text }}'
sshKey: '{{ _ssh_pubkey }}'
